<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>TEF Tree</title>

    <style>
	
	.node {
		cursor: pointer;
	}

	.node circle {
	  fill: #fff;
	  stroke: steelblue;
	  stroke-width: 3px;
	}

	.node text {
	  font: 12px sans-serif;
	}

	.link {
	  fill: none;
	  stroke: #ccc;
	  stroke-width: 2px;
	}
	
    </style>

  </head>

  <body>

<!-- load the d3.js library -->	
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
	
<script>

var treeData = [{'name': 'Transportation Equity Framework', 'parent': 'null', 'children': [{'parent': 'Transportation Equity Framework', 'name': 'Community Engagement', 'children': [{'parent': 'Community Engagement', 'name': 'Community Engagement as Standard Practice', 'children': [{'parent': 'Community Engagement as Standard Practice', 'name': "[2022] Formalize the department-wide community engagement guidelines and policies that direct SDOT to compensate community members from BIPOC and vulnerable communities when engaging and asking for folks' community expertise. "}, {'parent': 'Community Engagement as Standard Practice', 'name': '[2022] Create a budgeting tool for divisions and programs to use during the annual budget process to develop spending plans specific to community engagement and outreach.'}, {'parent': 'Community Engagement as Standard Practice', 'name': '[2022] Identify 2 neighborhoods and pilot a third-place community engagement model that centers on relationship building between staff and community members.'}, {'parent': 'Community Engagement as Standard Practice', 'name': "[2022] Advocate for the City's Finance and Administrative Services department to lead a citywide conversation with all departments to explore creation of shared work spaces for staff to conduct outreach and engagement in community. "}, {'parent': 'Community Engagement as Standard Practice', 'name': '[2023] Create a department-wide community engagement support team to ensure consistent implementation of TEF-aligned equitable community engagement practices. '}]}, {'parent': 'Community Engagement', 'name': 'Capacity Building', 'children': [{'parent': 'Capacity Building', 'name': '[2022] Develop a department-wide accountability policy and criteria for division directors, program owners, and project managers to dedicate a robust and equitable budget for community engagement and outreach.'}, {'parent': 'Capacity Building', 'name': '[2022] Establish expectations, guidelines and protocols for directors, program managers, and project owners to be a part of the on-the-ground efforts and relationship building process of outreach and engagement with community.'}, {'parent': 'Capacity Building', 'name': '[2022] Establish department-wide requirements and resources for engagement; this could include building cultural awareness, documenting knowledge of community partners, and ensuring that technical language is culturally relevant.'}, {'parent': 'Capacity Building', 'name': 'Create a regular venue for staff from across SDOT to share best practices and learn how to conduct equitable community engagement practices; learn from each other instead of burdening BIPOC and vulnerable communities.'}]}, {'parent': 'Community Engagement', 'name': 'Partnerships & Internal Practice', 'children': [{'parent': 'Partnerships & Internal Practice', 'name': '[2022] Craft an SDOT-wide vision statement for community engagement and include a regular evaluation of our outreach practices to ensure we are working toward that vision and that engagement is relational, not just transactional.'}, {'parent': 'Partnerships & Internal Practice', 'name': '[2022] Shift the Transformational Equity Leadership Cohort (TELC) and Brave Space initiatives from pilots to permanent and regular practice across the department.'}, {'parent': 'Partnerships & Internal Practice', 'name': '[2022] Develop regular relationship-building opportunities for SDOT crew to connect with historically and currently excluded neighborhoods to educate residents on SDOT assets and receive feedback on maintenance priorities.'}, {'parent': 'Partnerships & Internal Practice', 'name': '[2022] Develop a list of available stakeholder groups to collaborate with and establish regular check-ins where discussions about projects that are being considered but are not fully programmed can be discussed. '}, {'parent': 'Partnerships & Internal Practice', 'name': '[2022] Conduct an internal assessment within SDOT to determine what tool would be best for us to create a visual database to coordinate and centralize partners for outreach.'}, {'parent': 'Partnerships & Internal Practice', 'name': '[2022] Develop processes and practices where staff at all levels (including managers and division directors) regularly stop and check-in with community-based organizations and connect with community leaders. '}, {'parent': 'Partnerships & Internal Practice', 'name': '[2022] Explore and identify a streamlined process or tool that can be used by all City department to ensure that the City is not asking the same businesses or community-based organizations repeatedly for engagement.'}, {'parent': 'Partnerships & Internal Practice', 'name': '[2023] Create a series of workshops, job shadowing, internships or mentorships for staff to have experiential learning on engaging with community to normalize the experience and process of engagement and customer service.'}]}, {'parent': 'Community Engagement', 'name': 'Build Trust & Time', 'children': [{'parent': 'Build Trust & Time', 'name': "[2022] Partner with community organizations and/or community members to develop and tailor language access strategies that work for a particular community; update these strategies within SDOT's Language Access Plan and budget. "}, {'parent': 'Build Trust & Time', 'name': '[2022] Daylight and create dynamic evaluation of internal processes related to outreach and engagement for selected SDOT plans, policies, programs, and projects to identify the internal barriers that need to be addressed.'}, {'parent': 'Build Trust & Time', 'name': '[2022] Create user-friendly guidelines for SDOT staff and contractors to convey project status information, from project identification in a long-term planning document, to project development, to construction and implementation.'}, {'parent': 'Build Trust & Time', 'name': '[2023] Create a roadmap of outreach and engagement categorization levels and processes that help SDOT staff be more intentional as they build their outreach and community engagement plans and manage community expectations.'}]}]}, {'parent': 'Transportation Equity Framework', 'name': 'COVID-19', 'children': [{'parent': 'COVID-19', 'name': 'Outreach and Education', 'children': [{'parent': 'Outreach and Education', 'name': 'Coordinate and partner with King County Metro and Sound Transit on accessible communications to encourage riders to return to transit as part of COVID recovery; ensure tactics are reaching BIPOC and vulnerable communities.'}, {'parent': 'Outreach and Education', 'name': 'Provide community organizations with fare products to distribute in communities for vaccine-site access.'}, {'parent': 'Outreach and Education', 'name': 'Use Seattle Transportation Benefit District funding to partner with King County Metro to provide transportation services for community members to access COVID-19 vaccines focus on areas with the greatest access needs. '}, {'parent': 'Outreach and Education', 'name': 'Partner with transportation agencies and organizations to financially support translation of information for people to be able to access the COVID-19 Vaccine Transportation Call Center.'}, {'parent': 'Outreach and Education', 'name': 'Engage with partners at Public Health Seattle-King County to assess 2021 vaccination rates and identify if there are transportation needs and support SDOT can provide to increase access to vaccines.'}]}, {'parent': 'COVID-19', 'name': 'PPE', 'children': [{'parent': 'PPE', 'name': '[2022] Partner with King County Metro and Sound Transit to understand their long-term plans to provide personal protective equipment on transit and identify where SDOT can support and supplement.'}, {'parent': 'PPE', 'name': "Partner with community-based organizations and businesses to monitor and steward hand sanitizer stations in targeted transportation shelters and hubs in SDOT's identified COVID-19 recovery focus geographies. "}]}, {'parent': 'COVID-19', 'name': 'Safety Protocols', 'children': [{'parent': 'Safety Protocols', 'name': '[2022] Survey transit riders on board and at stops/stations about safety concerns; ask about specific locations where there are concerns about safety at waiting areas.* Align with tactic 11.1'}, {'parent': 'Safety Protocols', 'name': 'Explore a partnership with King County Metro, Sound Transit, and the Office of Arts & Culture to create artistic public health messaging in identified transit.'}, {'parent': 'Safety Protocols', 'name': 'Coordinate with King County Metro and Sound Transit to create and supplement signage to educate riders on social distancing best practices when using public transit.'}, {'parent': 'Safety Protocols', 'name': 'Identify areas of partnership between SDOT and King County Metro to supplement and cross-promote public health safety campaigns. '}]}, {'parent': 'COVID-19', 'name': 'Alternative Access', 'children': [{'parent': 'Alternative Access', 'name': '[2022] Identify COVID-19 transit-related practices that will continue as part of recovery and determine how SDOT can support, supplement, and or increase their value. '}, {'parent': 'Alternative Access', 'name': '[2022] Develop SDOT work plans that equitably allocate resources for capital projects and maintenance efforts in communities hit hardest by COVID.'}]}, {'parent': 'COVID-19', 'name': 'Transit-Dependent Communities', 'children': [{'parent': 'Transit-Dependent Communities', 'name': '[2022] Layer current transit route map with locations of small businesses owned by BIPOC and vulnerable communities, and analyze neighborhoods/locations where transit routes can be further improved to assist business recovery.'}]}, {'parent': 'COVID-19', 'name': 'Important Destinations', 'children': [{'parent': 'Important Destinations', 'name': '[2022] Create a map that identifies key social and human services agencies and layers current transit routes access information. '}]}, {'parent': 'COVID-19', 'name': 'Public Space', 'children': [{'parent': 'Public Space', 'name': '[2022] Launch a pilot program with community members in focus neighborhoods with high COVID-19 impacts to activate public space in 5-10 potential transit stop locations. *Alignment with Tactic 7.1'}, {'parent': 'Public Space', 'name': '[2022] Annually resource (funding and staff) public art projects to support BIPOC communities; institutionalize this effort as a permanent program. '}, {'parent': 'Public Space', 'name': '[2022] Identify COVID impacted BIPOC-owned small businesses that need help to set up outdoor dining and identify ways SDOT, OED, DON or other departments or non-profits can provide support.'}, {'parent': 'Public Space', 'name': '[2023] Partner with other City departments to identify neighborhoods without Business Improvement Areas (BIAs), and provide them with technical assistance support and dedicated funding to improve public spaces in these areas.'}, {'parent': 'Public Space', 'name': '[2023] Create and launch a public space initiative that is community-driven to foster connection and build public spaces (e.g., places to socialize and host cultural events, create community gardens); an example could be an "adopt-a-stop" initiative.'}, {'parent': 'Public Space', 'name': '[2023] Develop a program to compensate community for ongoing activation, management, stewardship, and maintenance of plazas and other public spaces.'}]}]}, {'parent': 'Transportation Equity Framework', 'name': 'Economic Development', 'children': [{'parent': 'Economic Development', 'name': 'Development & Transportation Growth', 'children': [{'parent': 'Development & Transportation Growth', 'name': '[2022] Ensure the Seattle transportation plan contains policies that advance anti-displacement strategies.'}, {'parent': 'Development & Transportation Growth', 'name': '[2023] Assess and update the current Seattle Department of Construction and Inspections (SDCI) TIP regarding transportation mitigation payments.'}, {'parent': 'Development & Transportation Growth', 'name': 'Support establishment of Growth Management Act (GMA) and Transportation Benefit District (TBD) impact fees for development. '}]}, {'parent': 'Economic Development', 'name': 'Promoting Opportunities', 'children': [{'parent': 'Promoting Opportunities', 'name': "[2022] Collaborate with City's Office of Economic Development (OED) to enhance the street vendors program and support BIPOC entrepreneurs through technical assistance."}, {'parent': 'Promoting Opportunities', 'name': '[2022] Use 2020 census neighborhood change data from OPCD Equitable Development Monitoring Program to study where BIPOC communities have been displaced to and assess the current transportation access to community assets. '}, {'parent': 'Promoting Opportunities', 'name': '[2022] Pilot collection of data stories and co-learning opportunities that compare the transportation costs for BIPOC communities to reach economic centers and opportunities with those of other neighborhoods.'}, {'parent': 'Promoting Opportunities', 'name': "[2022] Create a foundational practice within SDOT that centers BIPOC firms and community-based organizations throughout the department's contracting equity and engagement activities."}, {'parent': 'Promoting Opportunities', 'name': '[2023] Advocate for a commercial affordability policy that provides affordable commercial spaces to BIPOC and minority- owned businesses.'}, {'parent': 'Promoting Opportunities', 'name': '[2023] Create a paid apprenticeship training program within SDOT to create advancement for BIPOC staff and career-building opportunities for BIPOC community members.'}, {'parent': 'Promoting Opportunities', 'name': '[2023] Collaborate with other City departments to build on tools and practices so SDOT can assess displacement risks of community anchors before making a policy, program, or project-related decision.'}]}, {'parent': 'Economic Development', 'name': 'Prevention', 'children': [{'parent': 'Prevention', 'name': "[2022] Identify opportunities where the transportation element and urban village strategy could consider and include anti-displacement principles, and ensure policies are flexible and responsive to community's needs."}, {'parent': 'Prevention', 'name': '[2022] Provide local businesses with tools and wrap-around support to mitigate local business displacement impacts and ensure a continuous engagement process from the design to construction phase. '}, {'parent': 'Prevention', 'name': '[2023] Institute practice of engaging in conversations with local BIPOC-owned businesses about displacement and co-develop strategies for impacted commercial areas during design of transportation or private development projects.'}, {'parent': 'Prevention', 'name': '[2024] Partner with City departments, foundations, and the private sector to identify paths to providing technical assistance and financial support opportunities directly to BIPOC businesses that are impacted by construction.'}]}, {'parent': 'Economic Development', 'name': 'Affordable Transportation', 'children': [{'parent': 'Affordable Transportation', 'name': "[2022] Engage with local BIPOC-owned businesses to determine how SDOT can support their employees' transit and transportation needs for commuting."}]}, {'parent': 'Economic Development', 'name': 'Operate & Thrive', 'children': [{'parent': 'Operate & Thrive', 'name': '[2022] Interview/survey BIPOC businesses about their transportation, public space and permitting needs; publish the results SDOT-wide so other staff can consider ways to address identified needs through other projects and programs.'}, {'parent': 'Operate & Thrive', 'name': '[2022] Evaluate data from Public Space Management (PSM) Market Streets pilot to identify needed resources to transition this pilot to a program.'}]}, {'parent': 'Economic Development', 'name': 'Local Cultural Assets', 'children': [{'parent': 'Local Cultural Assets', 'name': '[2022] Engage continuously with communities to make them aware of existing and new SDOT resources available to support BIPOC small businesses; provide accessible and culturally relevant information on SDOT services.'}, {'parent': 'Local Cultural Assets', 'name': '[2022] Identify informational materials related to SDOT resources available for businesses and allocate funding for translation to ensure consistency with our language access plan.'}, {'parent': 'Local Cultural Assets', 'name': '[2022] Provide low-tech and language-accessible information to businesses about parking/loading and how communities can make requests for load zones or other curbside uses. '}, {'parent': 'Local Cultural Assets', 'name': '[2022] Conduct community workshops to better understand the activities communities want and need in the right-of-way (ROW); use this to inform the People Streets and Public Spaces effort for equitable public space investment.'}, {'parent': 'Local Cultural Assets', 'name': '[2023] Explore an income-based system to make right-of-way (ROW) permits affordable for minority-owned restaurants and food vendors. '}]}]}, {'parent': 'Transportation Equity Framework', 'name': 'Infrastructure, Planning, and Maintenance', 'children': [{'parent': 'Infrastructure, Planning, and Maintenance', 'name': 'Participatory Budgeting', 'children': [{'parent': 'Participatory Budgeting', 'name': '[2022] Create an annual assessment process on current flexible funding sources and determine where dollars can be shifted to meet communities needs and priorities.'}, {'parent': 'Participatory Budgeting', 'name': '[2022] Create a department-wide internal policy and practice where new revenue sources and spend plans require a budgeting process that includes engagement with BIPOC and vulnerable communities to determine where revenue should go.'}, {'parent': 'Participatory Budgeting', 'name': '[2023] Include a participatory budgeting process in the development of the transportation funding package, include elements of the Transportation Equity Framework, learnings from Your Voice Your Choice and Neighborhood Street Fund.'}, {'parent': 'Participatory Budgeting', 'name': '[2023] Generate funding and savings opportunities to help manage assets and maintenance backlog; develop opportunities to drive budget savings for maximum benefit for BIPOC community and increase revenue.'}]}, {'parent': 'Infrastructure, Planning, and Maintenance', 'name': 'Equitable Infrastructure', 'children': [{'parent': 'Equitable Infrastructure', 'name': '[2022] Normalize decisions about right-of-way (ROW) reallocations to be made in partnership with BIPOC communities. '}, {'parent': 'Equitable Infrastructure', 'name': '[2022] Identify opportunities to repurpose some travel lanes for transit, biking, and also smaller, lighter-weight vehicles and devices to create more travel options with the Seattle Transportation Plan.'}, {'parent': 'Equitable Infrastructure', 'name': '[2022] Conduct a racial equity assessment of the maintenance needs of existing assets in high-risk displacement and BIPOC populated neighborhoods.'}, {'parent': 'Equitable Infrastructure', 'name': '[2024] Focus maintenance resources in communities and neighborhoods currently underserved by government that have significant maintenance needs; use findings from the racial equity assessment.'}, {'parent': 'Equitable Infrastructure', 'name': '[2022] Identify, pursue and implement new progressive funding policies that are equitable and includes values to address income inequality.'}, {'parent': 'Equitable Infrastructure', 'name': '[2023] Prioritize person-throughput as metric rather than vehicle throughput.'}]}]}]}]

// ************** Generate the tree diagram	 *****************
var margin = {top: 20, right: 80, bottom: 20, left: 140},
	width = 980 - margin.right - margin.left,
	height = 760 - margin.top - margin.bottom;
	
var i = 0,
	duration = 750,
	root;

var tree = d3.layout.tree()
	.size([height, width]);

var diagonal = d3.svg.diagonal()
	.projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
	.attr("width", width + margin.right + margin.left)
	.attr("height", height + margin.top + margin.bottom)
  .append("g")
	.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

root = treeData[0];
root.x0 = height / 2;
root.y0 = 0;
  
update(root);

d3.select(self.frameElement).style("height", "760px");

function update(source) {

  // Compute the new tree layout.
  var nodes = tree.nodes(root).reverse(),
	  links = tree.links(nodes);

  // Normalize for fixed-depth.
  nodes.forEach(function(d) { d.y = d.depth * 160; });

  // Update the nodes…
  var node = svg.selectAll("g.node")
	  .data(nodes, function(d) { return d.id || (d.id = ++i); });

  // Enter any new nodes at the parent's previous position.
  var nodeEnter = node.enter().append("g")
	  .attr("class", "node")
	  .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
	  .on("click", click);

  nodeEnter.append("circle")
	  .attr("r", 1e-6)
	  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeEnter.append("text")
	  .attr("x", function(d) { return d.children || d._children ? -13 : 13; })
	  //.attr("dy", ".35em")
	  .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
	  .text(function(d) { return d.name; })
	  .style("fill-opacity", 1e-6)
    .call(wrap); //wrap the text in < 200 pixels

  // Transition nodes to their new position.
  var nodeUpdate = node.transition()
	  .duration(duration)
	  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

  nodeUpdate.select("circle")
	  .attr("r", 10)
	  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeUpdate.select("text")
	  .style("fill-opacity", 1);

  // Transition exiting nodes to the parent's new position.
  var nodeExit = node.exit().transition()
	  .duration(duration)
	  .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
	  .remove();

  nodeExit.select("circle")
	  .attr("r", 1e-6);

  nodeExit.select("text")
	  .style("fill-opacity", 1e-6);

  // Update the links…
  var link = svg.selectAll("path.link")
	  .data(links, function(d) { return d.target.id; });

  // Enter any new links at the parent's previous position.
  link.enter().insert("path", "g")
	  .attr("class", "link")
	  .attr("d", function(d) {
		var o = {x: source.x0, y: source.y0};
		return diagonal({source: o, target: o});
	  });

  // Transition links to their new position.
  link.transition()
	  .duration(duration)
	  .attr("d", diagonal);

  // Transition exiting nodes to the parent's new position.
  link.exit().transition()
	  .duration(duration)
	  .attr("d", function(d) {
		var o = {x: source.x, y: source.y};
		return diagonal({source: o, target: o});
	  })
	  .remove();

  // Stash the old positions for transition.
  nodes.forEach(function(d) {
	d.x0 = d.x;
	d.y0 = d.y;
  });
  

}
  // Titles and labels
  svg.append("text")
   .attr("x", 160)
   .attr("y", 30)
   .attr("text-anchor", "middle")
   .style("font-size", "12px")
   .style("fill", "steelblue")
   .style("font-family", 'sans-serif')
   .text("VALUE");
  
  svg.append("text")
   .attr("x", 320)
   .attr("y", 30)
   .attr("text-anchor", "middle")
   .style("font-size", "12px")
   .style("fill", "steelblue")
   .style("font-family", 'sans-serif')
   .text("STRATEGY");
   
     svg.append("text")
   .attr("x", 480)
   .attr("y", 30)
   .attr("text-anchor", "middle")
   .style("font-size", "12px")
   .style("fill", "steelblue")
   .style("font-family", 'sans-serif')
   .text("TACTIC");
   
   
function wrap(text) {
var wrapwidth
    text.each(function () {
        var text = d3.select(this),
            words = text.text().split(" ").reverse(),
            word,
            line = [],
            lineNumber = 1,
            lineHeight = 1, // ems
            x = text.attr("x"),
            y = text.attr("y"),
            dy = .35, //parseFloat(text.attr("dy")),
            tspan = text.text(null)
                        .append("tspan")
                        .attr("x", x)
                        .attr("y", y)
                        .attr("dy", dy + "em");
                        
        if (words.length > 7) {wrapwidth = 340} else {wrapwidth = 140}
        
        while (word = words.pop()) {
            line.push(word);
            tspan.text(line.join(" "));
            if (tspan.node().getComputedTextLength() > wrapwidth) {
                line.pop();
                tspan.text(line.join(" "));
                line = [word];
                tspan = text.append("tspan")
                            .attr("x", x)
                            .attr("y", y)
                            .attr("dy", (dy + (lineNumber * lineHeight)) + "em")
                            .text(word);
            }
        }
    });
}





// Toggle children on click.
function click(d) {
 
  if (d.children) {
	d._children = d.children;
  console.log("off " + d.name + " " + d.depth)
	d.children = null;
  } else {
  if (d.depth == 2){collapseLevel2()}
  if (d.depth == 1){collapseLevel1()}


      //update(d)
      
  collapse(d)
	d.children = d._children;
  console.log("on " + d.name + " " + d.depth)
	d._children = null;
  }
  
  update(d);
}
 //Changes added for collapsing starts//
 function collapse(d) {
   if (d.children) {
      
     d._children = d.children;
     d.children = null;
     d._children.forEach(collapse);
   }
   update(d);
 }
	
 
// collapse level d  
function collapseLevel2() {
 if (root.children[0].children) {root.children[0].children.forEach(collapse);}
 if (root.children[1].children) {root.children[1].children.forEach(collapse);}
 if (root.children[2].children) {root.children[2].children.forEach(collapse);}
 if (root.children[3].children) {root.children[3].children.forEach(collapse);}
} 

function collapseLevel1() {
	root.children.forEach(collapse);
} 


 //collapseLevel()
 //Only children will be collpased
 root.children.forEach(collapse);
 //collapseLevel()
 
 // To collapse all to root element
 //collapse(root);

 //Changes added for collapsing ends//
 update(root);

</script>
	
  </body>
</html>
  </body>
</html>
